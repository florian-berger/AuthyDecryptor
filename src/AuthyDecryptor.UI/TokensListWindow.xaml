<sf:ChromelessWindow x:Class="AuthyDecryptor.UI.TokensListWindow"
                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                     xmlns:sf="http://schemas.syncfusion.com/wpf"
                     xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
                     xmlns:viewModel="clr-namespace:AuthyDecryptor.UI.ViewModel"
                     xmlns:model="clr-namespace:AuthyDecryptor.Model;assembly=AuthyDecryptor.Model"
                     xmlns:converters="clr-namespace:AuthyDecryptor.UI.Wpf.Converters"
                     xmlns:barcode="clr-namespace:Syncfusion.UI.Xaml.Controls.Barcode;assembly=Syncfusion.SfBarcode.WPF"
                     mc:Ignorable="d" Title="Decrypted tokens" WindowStyle="ToolWindow"
                     WindowStartupLocation="CenterOwner" CornerRadius="0"
                     sf:SfSkinManager.Theme="{sf:SkinManager ThemeName=Windows11Dark}"
                     Icon="{fa:IconSource Lock, Foreground=White}"
                     Height="500" Width="800"
                     d:DataContext="{d:DesignInstance viewModel:TokensListViewModel, IsDesignTimeCreatable=False}">
    <sf:ChromelessWindow.Resources>
        <converters:NotNullToVisibilityConverter x:Key="NotNullToVisibilityConverter" />
        <converters:NotNullToVisibilityConverter x:Key="NullToVisibilityConverter" Inverted="True" />
    </sf:ChromelessWindow.Resources>

    <DockPanel>
        <sf:SfNavigationDrawer DisplayMode="Expanded" IsToggleButtonVisible="False" ExpandedModeWidth="200"
                               ItemsSource="{Binding Path=Tokens, Mode=OneWay}"
                               SelectedItem="{Binding Path=SelectedToken, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <sf:SfNavigationDrawer.ItemTemplate>
                <DataTemplate DataType="{x:Type model:DecryptedToken}">
                    <Grid HorizontalAlignment="Stretch" MaxWidth="185">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Margin="0,5,0,0"
                                   FontWeight="Bold" FontSize="13" TextTrimming="CharacterEllipsis"
                                   Text="{Binding Path=Name, Mode=OneWay}" />

                        <TextBlock Grid.Row="1" Margin="0,5,0,0"
                                   TextTrimming="CharacterEllipsis"
                                   Text="{Binding Path=Issuer, Mode=OneWay}" />
                    </Grid>
                </DataTemplate>
            </sf:SfNavigationDrawer.ItemTemplate>

            <sf:SfNavigationDrawer.ContentView>
                <Grid Margin="12,8">
                    <!-- Start: Nothing selected -->
                    <Grid Visibility="{Binding Path=SelectedToken, Mode=OneWay, Converter={StaticResource NullToVisibilityConverter}}">
                        <Border HorizontalAlignment="Center" VerticalAlignment="Center" Background="#3b3a39" CornerRadius="10" Padding="30" Width="275">
                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Text="No token selected" FontWeight="Bold" FontSize="16" HorizontalAlignment="Center" />

                                <Grid Grid.Row="1" Margin="20">
                                    <Ellipse Height="124" Width="124" Fill="#333231" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                    <Image Source="{fa:IconSource Archive, Foreground=White, IconFont=Solid}" Height="64" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                </Grid>

                                <TextBlock Grid.Row="2" Text="Select a token from the list on the left side to get detailed information about it. There you can also generate a QR code to set up a new authenticator app easily." TextWrapping="Wrap"
                                           MaxWidth="180" HorizontalAlignment="Center" TextAlignment="Center" />
                            </Grid>
                        </Border>
                    </Grid>
                    <!-- End: Nothing selected -->

                    <!-- Start: Token selected -->
                    <Grid Visibility="{Binding Path=SelectedToken, Mode=OneWay, Converter={StaticResource NotNullToVisibilityConverter}}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <sf:SfTextInputLayout Grid.Row="0" Grid.Column="0" ContainerType="Outlined" Hint="Name" Focusable="False" HorizontalAlignment="Stretch">
                            <TextBox Text="{Binding Path=SelectedToken.Name, Mode=OneWay}" />
                        </sf:SfTextInputLayout>

                        <sf:SfTextInputLayout Grid.Row="1" Grid.Column="0" ContainerType="Outlined" Hint="Issuer" Focusable="False" HorizontalAlignment="Stretch">
                            <TextBox Text="{Binding Path=SelectedToken.Issuer, Mode=OneWay}" />
                        </sf:SfTextInputLayout>

                        <sf:SfTextInputLayout Grid.Row="2" Grid.Column="0" ContainerType="Outlined" Hint="Number of digits" Focusable="False" HorizontalAlignment="Stretch">
                            <TextBox Text="{Binding Path=SelectedToken.Digits, Mode=OneWay}" />
                        </sf:SfTextInputLayout>

                        <sf:SfTextInputLayout Grid.Row="3" Grid.Column="0" ContainerType="Outlined" Hint="Secret" Focusable="False" HorizontalAlignment="Stretch">
                            <TextBox Text="{Binding Path=SelectedToken.DecryptedSeed, Mode=OneWay}" />
                        </sf:SfTextInputLayout>

                        <Grid Grid.Row="0" Grid.Column="1" Grid.RowSpan="4" Background="White" Margin="20,8,8,0" VerticalAlignment="Top">
                            <barcode:SfBarcode Symbology="QRBarcode" Text="{Binding Path=QrCodeDisplayData, Mode=OneWay}"
                                               DisplayText="False" Margin="6" Width="128" Height="128" >
                                <barcode:SfBarcode.SymbologySettings>
                                    <barcode:QRBarcodeSetting XDimension="8" />
                                </barcode:SfBarcode.SymbologySettings>
                            </barcode:SfBarcode>
                        </Grid>
                    </Grid>
                    <!-- End: Token selected -->
                </Grid>
            </sf:SfNavigationDrawer.ContentView>
        </sf:SfNavigationDrawer>
    </DockPanel>
</sf:ChromelessWindow>
